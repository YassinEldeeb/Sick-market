{"version":3,"sources":["img/notAllowed.svg","components/CartProduct.js","actions/checkProducts.js","pages/Cart.js"],"names":["_path","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgNotAllowed","_ref","svgRef","title","titleId","props","width","height","viewBox","fill","xmlns","ref","id","d","ForwardRef","StyledProduct","styled","div","CartProduct","product","cartCount","setCartCount","check","setRemovedProducts","removedProducts","dispatch","useDispatch","useState","qty","setQty","cartItems","useSelector","state","cart","str","soldOut","setSoldOut","removed","setRemoved","useEffect","find","e","_id","className","to","onClick","type","tiny","contWidth","contWidthMobile","src","image","alt","imgId","loaderId","brand","name","substr","Rating","ratingValue","rating","numOfReviews","numReviews","price","QtySelector","removeAction","removed2","filter","Number","checkProduct","token","getState","a","cancelToken","axios","CancelToken","config","headers","Content_Type","Authorization","IDsArray","map","post","products","data","productsData","Math","min","qtyPerUser","countInStock","payload","localStorage","setItem","JSON","stringify","response","message","StyledCart","Cart","loadingCheck","checkError","checkProductsSuccess","user","userInfo","pricesArr","each","qtyArr","redirect","sold","forEach","push","reduce","acc","item","Goback","msg","toFixed","style","flexGrow"],"mappings":"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","file":"static/js/14.ba2d4bba.chunk.js","sourcesContent":["var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgNotAllowed(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 50,\n    height: 50,\n    viewBox: \"0 0 50 50\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M24.9999 0C11.1875 0 0 11.1875 0 24.9999C0 38.8124 11.1875 49.9999 24.9999 49.9999C38.8124 49.9999 50 38.8125 50 24.9999C50 11.1874 38.8125 0 24.9999 0ZM5.00004 24.9999C5.00004 13.95 13.95 4.99992 25.0001 4.99992C29.6251 4.99992 33.8626 6.58746 37.25 9.21245L9.21245 37.25C6.58746 33.8625 5.00004 29.625 5.00004 24.9999ZM24.9999 45C20.3749 45 16.1374 43.4124 12.75 40.7874L40.7874 12.75C43.4124 16.1375 45 20.375 45 24.9999C45 36.05 36.05 45 24.9999 45Z\",\n    fill: \"white\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgNotAllowed);\nexport default __webpack_public_path__ + \"static/media/notAllowed.cf663d17.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport Rating from './Rating'\r\nimport QtySelector from './QtySelector'\r\nimport { removeAction } from '../actions/cart'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport SmoothImg from './smoothImgLoading'\r\nimport { ReactComponent as NotAllowed } from '../img/notAllowed.svg'\r\n\r\nconst CartProduct = ({\r\n  product,\r\n  cartCount,\r\n  setCartCount,\r\n  check,\r\n  setRemovedProducts,\r\n  removedProducts,\r\n}) => {\r\n  const dispatch = useDispatch()\r\n  const [qty, setQty] = useState(product.qty)\r\n  const { cartItems } = useSelector((state) => state.cart)\r\n\r\n  function truncate(str) {\r\n    return str.length > 30 ? str.substr(0, 30 - 1) + '...' : str\r\n  }\r\n  const [soldOut, setSoldOut] = useState(null)\r\n  const [removed, setRemoved] = useState(null)\r\n\r\n  useEffect(() => {\r\n    if (check) {\r\n      setRemoved(check.removed.find((e) => e === product._id))\r\n      setSoldOut(check.soldOut.find((e) => e === product._id))\r\n    }\r\n  }, [check])\r\n\r\n  return (\r\n    <StyledProduct>\r\n      {removed && <div className='wrapper'> </div>}\r\n      {soldOut && <div className='wrapper2'> </div>}\r\n      <Link\r\n        className='imgLink'\r\n        to={`/products/${product._id}?redirect=cart`}\r\n        onClick={() => dispatch({ type: 'PRODUCT_DETAIL_REQUEST' })}\r\n      >\r\n        <SmoothImg\r\n          key={product._id}\r\n          tiny={`/api/products/${product._id}/tiny`}\r\n          contWidth={'10vw'}\r\n          contWidthMobile={'20vw'}\r\n          width={'100%'}\r\n          height={'120%'}\r\n          className='productImg'\r\n          src={product.image}\r\n          alt='product'\r\n          imgId='productImg'\r\n          loaderId='productImgLoader'\r\n        />\r\n      </Link>\r\n      <div className='desc'>\r\n        <p>Brand: {product.brand}</p>\r\n        <Link\r\n          className='descLink'\r\n          to={`/products/${product._id}?redirect=cart`}\r\n          onClick={() => dispatch({ type: 'PRODUCT_DETAIL_REQUEST' })}\r\n        >\r\n          {truncate(product.name)}\r\n        </Link>\r\n        <Rating\r\n          ratingValue={product.rating}\r\n          numOfReviews={product.numReviews}\r\n        />\r\n      </div>\r\n      <div className='priceQtyAndRemove'>\r\n        {!removed && !soldOut ? (\r\n          <h1>\r\n            {product.price}\r\n            <span className='currency'>EGP</span>\r\n          </h1>\r\n        ) : (\r\n          <div className='removed'>\r\n            <NotAllowed />\r\n            <h1>{removed ? 'Not Available' : soldOut ? 'Sold Out' : ''}</h1>\r\n          </div>\r\n        )}\r\n\r\n        <div className='removeAndQty'>\r\n          <QtySelector\r\n            className={removed || soldOut ? 'qtySelect' : null}\r\n            qty={qty}\r\n            setQty={setQty}\r\n            product={product}\r\n            cartItems={cartItems}\r\n            cartCount={cartCount}\r\n            setCartCount={setCartCount}\r\n          />\r\n          <div\r\n            className='removeBtn'\r\n            onClick={() => {\r\n              dispatch(removeAction(product))\r\n              if (!product.removed && !product.removed2)\r\n                setCartCount(Number(cartCount) - Number(qty))\r\n              else\r\n                setRemovedProducts(\r\n                  removedProducts.filter((e) => e !== product._id)\r\n                )\r\n            }}\r\n          >\r\n            <i className='fas fa-trash'></i>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </StyledProduct>\r\n  )\r\n}\r\nconst StyledProduct = styled.div`\r\n  .wrapper,\r\n  .wrapper2 {\r\n    z-index: 2;\r\n    background: rgba(255, 255, 255, 0.3);\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  .wrapper2 {\r\n    pointer-events: none;\r\n  }\r\n\r\n  position: relative;\r\n\r\n  .qtySelect {\r\n    pointer-events: none;\r\n    opacity: 0;\r\n  }\r\n  .imgLink {\r\n    height: calc(10vw * 0.796875) !important;\r\n  }\r\n  .removed {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    h1 {\r\n      pointer-events: none;\r\n      font-size: calc(0.7rem + 0.3vw) !important;\r\n      color: white !important;\r\n      font-weight: 500 !important;\r\n      user-select: none;\r\n    }\r\n\r\n    padding: 0.55rem 0.75rem;\r\n    background: #ff6969;\r\n    border-radius: 5px;\r\n    svg {\r\n      width: 18px;\r\n      height: 18px;\r\n      margin-right: 0.25rem;\r\n      pointer-events: none;\r\n      user-select: none;\r\n    }\r\n  }\r\n  .ratingCount {\r\n    display: none !important;\r\n  }\r\n  .imgLink,\r\n  .descLink {\r\n    width: max-content;\r\n    display: flex;\r\n  }\r\n  padding: 0.5rem 0;\r\n  border-bottom: 1px solid rgba(0, 0, 0, 12.5%);\r\n  &:last-child {\r\n    border-bottom: unset;\r\n  }\r\n  #productImg,\r\n  #productImgLoader {\r\n    border-radius: 5px;\r\n    max-width: 10vw;\r\n    object-fit: cover;\r\n  }\r\n  display: flex;\r\n  #productImg,\r\n  #productImgLoader,\r\n  .desc {\r\n    flex-grow: 1;\r\n  }\r\n  .desc {\r\n    padding: 0 calc(1rem + 0.3vw);\r\n    p {\r\n      color: #00667b;\r\n      font-size: calc(0.7rem + 0.4vw);\r\n    }\r\n    a {\r\n      display: block;\r\n      font-size: calc(1rem + 0.4vw);\r\n      font-weight: 400;\r\n      color: #1a1a1a;\r\n      &:hover {\r\n        text-decoration: underline;\r\n      }\r\n    }\r\n    .starsRating {\r\n      margin-top: 0.35rem;\r\n    }\r\n  }\r\n  .priceQtyAndRemove {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    align-items: flex-end;\r\n    h1 {\r\n      font-size: calc(1rem + 0.4vw);\r\n      font-weight: 400;\r\n      color: #1a1a1a;\r\n      .currency {\r\n        margin-left: 0.15rem;\r\n        font-size: calc(0.7rem + 0.4vw);\r\n      }\r\n    }\r\n    .removeAndQty .select .drop-menu {\r\n      top: 0;\r\n      bottom: unset;\r\n      max-height: 130px;\r\n      transform: translate(-17%, -100%);\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 1050px) {\r\n    .imgLink {\r\n      height: calc(20vw * 0.796875) !important;\r\n    }\r\n    .removed {\r\n      padding: 0.25rem 0.3rem;\r\n      border-radius: 4px;\r\n      h1 {\r\n        font-size: calc(0.4rem + 0.3vw) !important;\r\n      }\r\n      svg {\r\n        width: 8px;\r\n        height: 8px;\r\n        margin-right: 0.15rem;\r\n      }\r\n    }\r\n    .starsRating {\r\n      margin: 0 !important;\r\n      margin-top: 0.2rem !important;\r\n      .far,\r\n      .fas {\r\n        font-size: calc(0.7rem + 0.3vw) !important;\r\n      }\r\n    }\r\n    #productImg,\r\n    #productImgLoader {\r\n      max-width: 13vw;\r\n    }\r\n    .priceQtyAndRemove {\r\n      justify-content: space-between !important;\r\n      h1 {\r\n        font-size: calc(0.8rem + 0.4vw);\r\n      }\r\n      .currency {\r\n        margin-left: 0.15rem;\r\n        font-size: calc(0.6rem + 0.4vw) !important;\r\n      }\r\n      .removeAndQty {\r\n        .removeBtn {\r\n          padding: 0 0.62rem;\r\n          i {\r\n            font-size: calc(0.8rem + 0.3vw);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .desc {\r\n      padding-right: 0;\r\n      padding-left: calc(0.7rem + 0.2vw);\r\n      p {\r\n        font-size: calc(0.6rem + 0.4vw);\r\n      }\r\n      a {\r\n        font-size: calc(0.55rem + 1vw);\r\n      }\r\n      .starsRating {\r\n        display: none;\r\n      }\r\n    }\r\n    .select {\r\n      padding: 0.3rem 0.9rem;\r\n      h1 {\r\n        font-size: calc(0.8rem + 0.3vw) !important;\r\n        margin-right: 0.45rem;\r\n      }\r\n      svg {\r\n        width: 5px !important;\r\n      }\r\n      .drop-menu {\r\n        max-height: 110px !important;\r\n        width: 150% !important;\r\n        transform: translate(-34%, -100%) !important;\r\n        p {\r\n          font-size: calc(0.8rem + 0.3vw) !important;\r\n        }\r\n      }\r\n    }\r\n    .removeBtn {\r\n      margin-left: 0.7rem;\r\n    }\r\n  }\r\n  .priceQtyAndRemove {\r\n    z-index: 2 !important;\r\n  }\r\n  @media screen and (max-width: 550px) {\r\n    #productImg,\r\n    #productImgLoader {\r\n      max-width: 20vw;\r\n    }\r\n  }\r\n  @media screen and (max-width: 339px) {\r\n    .desc {\r\n      p {\r\n        font-size: calc(0.45rem + 0.4vw);\r\n      }\r\n      a {\r\n        font-size: calc(0.45rem + 1vw);\r\n      }\r\n    }\r\n    .priceQtyAndRemove {\r\n      h1 {\r\n        font-size: calc(0.65rem + 0.4vw);\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport default CartProduct\r\n","import axios from 'axios'\r\n\r\nconst checkProduct = (token) => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: 'CHECK_PRODUCTS_REQUEST' })\r\n    const cancelToken = axios.CancelToken\r\n    const source = cancelToken.source()\r\n    const config = {\r\n      headers: {\r\n        Content_Type: 'application/json',\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      cancelToken: source.token,\r\n    }\r\n    const { cartItems } = getState().cart\r\n\r\n    const IDsArray = cartItems.map((e) => e._id)\r\n\r\n    const { data } = await axios.post(\r\n      '/api/products/check',\r\n      { products: IDsArray },\r\n      config\r\n    )\r\n\r\n    const productsData = data.products.map((product) => {\r\n      return {\r\n        ...product,\r\n        qty: product._id\r\n          ? Math.min(\r\n              Math.min(\r\n                cartItems.find((e) => e._id === product._id).qty,\r\n                product.qtyPerUser\r\n              ),\r\n              product.countInStock\r\n            )\r\n          : 0,\r\n        removed: data.soldOut.find((e) => e === product._id) ? true : null,\r\n      }\r\n    })\r\n    dispatch({\r\n      type: 'CHECK_PRODUCTS_SUCCESS',\r\n      payload: {\r\n        check: { soldOut: data.soldOut, removed: data.removed },\r\n        products: productsData,\r\n      },\r\n    })\r\n    localStorage.setItem('sickCartProducts', JSON.stringify(productsData))\r\n  } catch (error) {\r\n    dispatch({\r\n      type: 'CHECK_PRODUCTS_FAIL',\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    })\r\n  }\r\n}\r\n\r\nexport default checkProduct\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport Message from '../components/message'\r\nimport Goback from '../components/Goback'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport CartProduct from '../components/CartProduct'\r\nimport { Link } from 'react-router-dom'\r\nimport checkProduct from '../actions/checkProducts'\r\nimport { useEffect } from 'react'\r\nimport Loader from '../components/loader'\r\n\r\nconst Cart = ({ cartCount, setCartCount }) => {\r\n  const dispatch = useDispatch()\r\n\r\n  const {\r\n    cartItems,\r\n    check,\r\n    loadingCheck,\r\n    checkError,\r\n    checkProductsSuccess,\r\n  } = useSelector((state) => state.cart)\r\n  const { user } = useSelector((state) => state.userInfo)\r\n  const pricesArr = cartItems.map((each) => {\r\n    if (!each.removed) return each.price * each.qty\r\n    else return 0\r\n  })\r\n  const qtyArr = cartItems.map((each) => {\r\n    if (!each.removed) return each.qty\r\n    else return 0\r\n  })\r\n\r\n  const redirect = user.name ? '/shipping' : '/login?redirect=shipping'\r\n\r\n  const [removedProducts, setRemovedProducts] = useState([])\r\n\r\n  useEffect(() => {\r\n    if (check) {\r\n      const removed = []\r\n      const sold = []\r\n      cartItems.forEach((product) => {\r\n        removed.push(...check.removed.filter((e) => e === product._id))\r\n        sold.push(...check.soldOut.filter((e) => e === product._id))\r\n      })\r\n      setRemovedProducts([...removed, ...sold])\r\n    }\r\n  }, [check])\r\n\r\n  useEffect(() => {\r\n    dispatch(checkProduct(user.token))\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (checkProductsSuccess)\r\n      setCartCount(qtyArr.length ? qtyArr.reduce((acc, item) => acc + item) : 0)\r\n  }, [checkProductsSuccess])\r\n  return (\r\n    <StyledCart>\r\n      <Goback />\r\n      <h1 className='title'>Shopping Cart</h1>\r\n      {loadingCheck && <Loader />}\r\n      {checkError && <Message msg={checkError} type='error' />}\r\n      {!loadingCheck && !checkError ? (\r\n        <>\r\n          {cartItems.length > 0 && (\r\n            <>\r\n              <div className='subtotal-mobile'>\r\n                <h3>\r\n                  Subtotal ({qtyArr.reduce((acc, item) => acc + item)} items):\r\n                </h3>\r\n                <h4>\r\n                  {pricesArr.reduce((acc, price) => acc + price).toFixed(2)}\r\n                  <span className='currency'>EGP</span>\r\n                </h4>\r\n              </div>\r\n              {pricesArr.reduce((acc, price) => acc + price) >= 2000 && (\r\n                <li className='mobileLi'>\r\n                  Free Shipping is applied for carts above 2000EGP.\r\n                </li>\r\n              )}\r\n              {pricesArr.reduce((acc, price) => acc + price) < 2000 && (\r\n                <li className='removeMargin'></li>\r\n              )}\r\n              <Link\r\n                id={`${\r\n                  cartItems.length - removedProducts.length <= 0\r\n                    ? 'disabled'\r\n                    : ''\r\n                }`}\r\n                to={redirect}\r\n                className='proceed-btn-mobile'\r\n              >\r\n                <h3>Proceed to checkout</h3>\r\n              </Link>\r\n              <div className='line'></div>\r\n            </>\r\n          )}\r\n          <div className='cart-container'>\r\n            <div\r\n              className='products'\r\n              style={{ flexGrow: `${cartItems.length ? 3 : 'unset'}` }}\r\n            >\r\n              {cartItems.length ? (\r\n                cartItems.map((product) => (\r\n                  <CartProduct\r\n                    check={check}\r\n                    product={product}\r\n                    key={product._id}\r\n                    cartCount={cartCount}\r\n                    setCartCount={setCartCount}\r\n                    setRemovedProducts={setRemovedProducts}\r\n                    removedProducts={removedProducts}\r\n                  />\r\n                ))\r\n              ) : (\r\n                <Message msg='Your cart is empty' />\r\n              )}\r\n            </div>\r\n            {cartItems.length !== 0 && (\r\n              <div className='table-total'>\r\n                <div className='container'>\r\n                  <div className='subtotal'>\r\n                    <h3>\r\n                      Subtotal ({qtyArr.reduce((acc, item) => acc + item)}{' '}\r\n                      items)\r\n                    </h3>\r\n                    <h4>\r\n                      {pricesArr.reduce((acc, price) => acc + price).toFixed(2)}\r\n                      <span className='currency'>EGP</span>\r\n                    </h4>\r\n                    {pricesArr.reduce((acc, price) => acc + price) > 2000 && (\r\n                      <li>\r\n                        Free Shipping is applied\r\n                        <br />\r\n                        for carts above 2000EGP.\r\n                      </li>\r\n                    )}\r\n                  </div>\r\n\r\n                  <Link\r\n                    id={`${\r\n                      cartItems.length - removedProducts.length <= 0\r\n                        ? 'disabled'\r\n                        : ''\r\n                    }`}\r\n                    to={redirect}\r\n                    className='proceed-btn'\r\n                  >\r\n                    <h3>Proceed to checkout</h3>\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        ''\r\n      )}\r\n    </StyledCart>\r\n  )\r\n}\r\nconst StyledCart = styled.div`\r\n  .mobileLi {\r\n    display: none;\r\n  }\r\n  #disabled {\r\n    pointer-events: none !important;\r\n    filter: grayscale(1);\r\n  }\r\n  .providedLoader {\r\n    align-self: center;\r\n    padding-top: 0.5rem;\r\n  }\r\n  .message {\r\n    margin-top: 0.5rem;\r\n  }\r\n  width: 90%;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  .goBackBtn {\r\n    margin-top: 0.7rem;\r\n  }\r\n  .title {\r\n    margin-top: 0.7rem;\r\n    color: #1a1a1a;\r\n    font-weight: 500;\r\n    font-size: calc(1.5rem + 1vw);\r\n    margin-bottom: 0.5rem;\r\n    width: 60%;\r\n  }\r\n  .products {\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  .subtotal-mobile {\r\n    width: 100%;\r\n    display: none;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n\r\n    h3,\r\n    h4 {\r\n      color: #1a1a1a;\r\n    }\r\n    h3 {\r\n      font-weight: 400;\r\n      font-size: calc(1.05rem + 0.3vw);\r\n    }\r\n    h4 {\r\n      font-weight: 400;\r\n      margin: 0.5rem 0;\r\n      font-size: calc(1.05rem + 0.3vw);\r\n      .currency {\r\n        margin-left: 0.15rem;\r\n        display: inline-block;\r\n        font-size: calc(0.8rem + 0.4vw);\r\n      }\r\n    }\r\n  }\r\n  li {\r\n    opacity: 0.8;\r\n    margin-bottom: 0.5rem;\r\n    padding-bottom: calc(0.25rem + 0.3vw);\r\n    border: 1px solid #00000012;\r\n    border-radius: 5px;\r\n    padding: 0.6rem 0.8rem;\r\n    list-style: none;\r\n    font-size: calc(0.7rem + 0.3vw);\r\n  }\r\n\r\n  .removeMargin {\r\n    list-style-type: none;\r\n    margin-bottom: 0;\r\n    border: unset;\r\n    padding: 0 !important;\r\n    height: calc(0.25rem + 0.3vw);\r\n  }\r\n  .table-total {\r\n    flex-grow: 1;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    .container {\r\n      border: 1px solid rgba(0, 0, 0, 12.5%);\r\n      align-self: flex-start;\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: space-between;\r\n      align-items: flex-start;\r\n      border-radius: 7px;\r\n      border: 1px solid rgba(0, 0, 0, 12.5%);\r\n      .subtotal {\r\n        border-bottom: 1px solid rgba(0, 0, 0, 12.5%);\r\n        padding: calc(1rem + 0.3vw);\r\n        padding-bottom: calc(0.25rem + 0.3vw);\r\n        width: 100%;\r\n        display: flex;\r\n        flex-direction: column;\r\n        li {\r\n          opacity: 0.8;\r\n          list-style: none;\r\n        }\r\n\r\n        h3,\r\n        h4 {\r\n          color: #1a1a1a;\r\n        }\r\n        h3 {\r\n          font-weight: 400;\r\n          font-size: calc(1.5rem + 0.3vw);\r\n        }\r\n        h4 {\r\n          font-weight: 200;\r\n          margin: 0.5rem 0;\r\n          font-size: calc(1.3rem + 0.3vw);\r\n          .currency {\r\n            display: inline-block;\r\n            font-size: calc(0.8rem + 0.4vw);\r\n            margin-left: 0.2rem;\r\n          }\r\n        }\r\n      }\r\n      .proceed-btn {\r\n        align-self: stretch;\r\n        cursor: pointer;\r\n        margin: calc(0.85rem + 0.3vw) calc(1rem + 0.3vw);\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        padding: calc(0.6rem + 0.1vw) calc(1.2rem + 0.1vw);\r\n        background: #00b2d8;\r\n        color: white;\r\n        border-radius: 7px;\r\n        h3 {\r\n          font-size: calc(1rem + 0.3vw);\r\n          font-weight: 400;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .proceed-btn-mobile {\r\n    margin-bottom: calc(0.25rem + 0.3vw);\r\n    cursor: pointer;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-self: stretch;\r\n    padding: calc(0.7rem + 0.1vw) calc(1.2rem + 0.1vw);\r\n    background: #00b2d8;\r\n    color: white;\r\n    border-radius: 7px;\r\n\r\n    display: none;\r\n    h3 {\r\n      font-size: calc(1.2rem + 0.3vw);\r\n      font-weight: 400;\r\n    }\r\n  }\r\n  .cart-container {\r\n    display: flex;\r\n    width: 100%;\r\n    gap: calc(1rem + 0.3vw);\r\n    margin-bottom: 0.5rem;\r\n  }\r\n  .removeAndQty {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: stretch;\r\n  }\r\n  .removeBtn {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    padding: 0 0.75rem;\r\n    background: rgba(26, 26, 26, 0.5);\r\n    color: white;\r\n    border-radius: 5px;\r\n    margin-left: 1rem;\r\n    cursor: pointer;\r\n    &:hover {\r\n      background: rgba(26, 26, 26, 0.6);\r\n    }\r\n  }\r\n  @media screen and (max-width: 1105px) {\r\n    .table-total {\r\n      .container {\r\n        .subtotal {\r\n          h3 {\r\n            font-size: calc(1.2rem + 0.3vw);\r\n          }\r\n          h4 {\r\n            font-size: calc(1.1rem + 0.3vw);\r\n          }\r\n        }\r\n        .proceed-btn {\r\n          h3 {\r\n            font-size: calc(0.8rem + 0.3vw);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  @media screen and (max-width: 1050px) {\r\n    .mobileLi {\r\n      display: block;\r\n    }\r\n    .line {\r\n      border-radius: 1px;\r\n      width: 45%;\r\n      height: 2px;\r\n      background: rgba(0, 176, 216, 62%);\r\n      margin: 0.8rem auto;\r\n    }\r\n    .subtotal-mobile,\r\n    .proceed-btn-mobile {\r\n      display: flex;\r\n    }\r\n    .table-total {\r\n      display: none;\r\n    }\r\n    .title {\r\n      font-size: calc(1.5rem + 1vw) !important;\r\n      width: 100%;\r\n    }\r\n  }\r\n`\r\n\r\nexport default Cart\r\n"],"sourceRoot":""}