{"version":3,"sources":["img/notAllowed.svg","components/CheckoutSteps.js","img/close.svg","components/PlaceOrderItem.js","actions/createOrder.js","pages/PlaceOrder.js"],"names":["_path","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgNotAllowed","_ref","svgRef","title","titleId","props","width","height","viewBox","fill","xmlns","ref","id","d","ForwardRef","StyledSteps","styled","div","CheckoutSteps","step1","step2","step3","step4","current","className","to","_circle","SvgClose","cx","cy","r","StyledItem","PlaceOrderItem","img","productName","qty","price","isBuyNow","soldOut","removed","setCartCount","cartCount","cart","useSelector","state","useEffect","productInCart","cartItems","find","e","_id","removed2","dispatch","useDispatch","onClick","removeAction","Number","type","preLoaderId","loaderId","src","alt","tiny","toFixed","createOrderAction","getState","a","userInfo","product","buyNowProduct","cancelToken","axios","CancelToken","config","headers","Content_Type","Authorization","token","modifiedCart","map","eachProduct","name","image","filter","console","log","post","user","orderItems","shippingAddress","address","city","phoneNumber","governorate","lat","location","lon","couponDiscount","paymentMethod","taxPrice","taxes","shippingPrice","shipping","totalPrice","itemsPrice","code","discount","voucherRemaining","Math","abs","data","localStorage","removeItem","payload","isJson","str","JSON","parse","passedError","response","message","error","confirm","StyledPlaceOrder","PlaceOrder","truncate","substr","history","useHistory","useLocation","search","split","push","pathname","toLocaleLowerCase","useState","each","pricesArr","setPricesArr","reduce","acc","item","setTotalPrice","toFixedFN","num","discountValue","amount","every","freeShipping","allFreeShipping","shippingValue","order","orderLoading","orderPlaced","errorConfirm","filtered","pricesArr2","totalPrice2","display_address","vibrating","includes","visiblity","msg","hidden"],"mappings":"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","file":"static/js/8.ca92a490.chunk.js","sourcesContent":["var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgNotAllowed(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 50,\n    height: 50,\n    viewBox: \"0 0 50 50\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M24.9999 0C11.1875 0 0 11.1875 0 24.9999C0 38.8124 11.1875 49.9999 24.9999 49.9999C38.8124 49.9999 50 38.8125 50 24.9999C50 11.1874 38.8125 0 24.9999 0ZM5.00004 24.9999C5.00004 13.95 13.95 4.99992 25.0001 4.99992C29.6251 4.99992 33.8626 6.58746 37.25 9.21245L9.21245 37.25C6.58746 33.8625 5.00004 29.625 5.00004 24.9999ZM24.9999 45C20.3749 45 16.1374 43.4124 12.75 40.7874L40.7874 12.75C43.4124 16.1375 45 20.375 45 24.9999C45 36.05 36.05 45 24.9999 45Z\",\n    fill: \"white\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgNotAllowed);\nexport default __webpack_public_path__ + \"static/media/notAllowed.cf663d17.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst CheckoutSteps = ({ step1, step2, step3, step4, current }) => {\r\n  return (\r\n    <StyledSteps>\r\n      <div className='journeyLine'>\r\n        <div\r\n          className={`circle circle1 ${step1 ? 'active' : ''} ${\r\n            current === 'step1' ? 'current' : ''\r\n          }`}\r\n        >\r\n          <h1>\r\n            <Link to='/login'>Sign In</Link>\r\n          </h1>\r\n        </div>\r\n        <div className={`line ${step2 ? 'active' : ''}`}></div>\r\n        <Link\r\n          id='RouterNavLink'\r\n          to='/shipping'\r\n          className={`circle circle2 ${step2 ? 'active' : ''} ${\r\n            current === 'step2' ? 'current' : ''\r\n          }`}\r\n        >\r\n          <h1>\r\n            <Link to='/shipping'>Shipping</Link>\r\n          </h1>\r\n        </Link>\r\n        <div className={`line ${step3 ? 'active' : ''}`}></div>\r\n        <Link\r\n          id='RouterNavLink'\r\n          to='/payment'\r\n          className={`circle circle3 ${step3 ? 'active' : ''} ${\r\n            current === 'step3' ? 'current' : ''\r\n          }`}\r\n        >\r\n          <h1>\r\n            <Link to='/payment'>Payment</Link>\r\n          </h1>\r\n        </Link>\r\n        <div className={`line ${step4 ? 'active' : ''}`}></div>\r\n        <Link\r\n          id='RouterNavLink'\r\n          to='/placeOrder'\r\n          className={`circle circle4 ${step4 ? 'active' : ''}  ${\r\n            current === 'step4' ? 'current' : ''\r\n          }`}\r\n        >\r\n          <h1>\r\n            <Link to='/placeOrder'>Place Order</Link>\r\n          </h1>\r\n        </Link>\r\n      </div>\r\n    </StyledSteps>\r\n  )\r\n}\r\nconst StyledSteps = styled.div`\r\n  .circle1 {\r\n    pointer-events: none !important;\r\n  }\r\n  h1 {\r\n    font-weight: 300;\r\n    font-size: calc(0.9rem + 0.2vw);\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    white-space: nowrap;\r\n    transform: translate(-50%, -154%);\r\n    a {\r\n      color: #343a40;\r\n    }\r\n  }\r\n  margin-top: 3.3rem;\r\n  .journeyLine {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .line {\r\n    width: calc(4rem + 4vw);\r\n    height: 4px;\r\n    background: #e4e4e4;\r\n    &.active {\r\n      background: #00b2d8;\r\n    }\r\n  }\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  .circle {\r\n    position: relative;\r\n    border-radius: 50%;\r\n    width: 21px;\r\n    height: 21px;\r\n    background: #e4e4e4;\r\n    pointer-events: none;\r\n    h1 a {\r\n      color: #b4b4b4;\r\n    }\r\n    &.active {\r\n      background: #00b2d8;\r\n      pointer-events: all;\r\n      h1 a {\r\n        font-weight: 400;\r\n        color: #343a40;\r\n      }\r\n    }\r\n  }\r\n  .current {\r\n    border: 2.7px solid #00b2d8;\r\n    background: transparent !important;\r\n    animation: pulse-blue 1s ease infinite;\r\n  }\r\n\r\n  @keyframes pulse-blue {\r\n    0% {\r\n      box-shadow: 0 0 0 0 rgba(52, 172, 224, 0.7);\r\n    }\r\n\r\n    70% {\r\n      box-shadow: 0 0 0 8px rgba(52, 172, 224, 0);\r\n    }\r\n\r\n    100% {\r\n      box-shadow: 0 0 0 0 rgba(52, 172, 224, 0);\r\n    }\r\n  }\r\n  @media screen and (max-width: 1050px) {\r\n    margin-top: 2.7rem;\r\n    .circle {\r\n      width: 17px;\r\n      height: 17px;\r\n    }\r\n    h1 {\r\n      font-size: calc(0.78rem + 0.2vw);\r\n      transform: translate(-50%, -157%);\r\n    }\r\n    .line {\r\n      width: calc(3.2rem + 4vw);\r\n      height: 2.5px;\r\n    }\r\n    .current {\r\n      border: 1.7px solid #00b2d8;\r\n    }\r\n    @keyframes pulse-blue {\r\n      0% {\r\n        box-shadow: 0 0 0 0 rgba(52, 172, 224, 0.7);\r\n      }\r\n\r\n      70% {\r\n        box-shadow: 0 0 0 6px rgba(52, 172, 224, 0);\r\n      }\r\n\r\n      100% {\r\n        box-shadow: 0 0 0 0 rgba(52, 172, 224, 0);\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport default CheckoutSteps\r\n","var _circle, _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgClose(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 51,\n    height: 55,\n    viewBox: \"0 0 51 55\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _circle || (_circle = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 25.5,\n    cy: 29.5,\n    r: 25.5,\n    fill: \"#2C2C2C\"\n  })), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M29.8169 40.37L25.4139 33.821L20.8629 40.37L17.1999 38.335L23.0089 30.824L17.4959 24.016L21.6029 21.204L25.6359 27.457L30.0019 21.13L33.5909 23.35L28.0779 30.528L33.9239 37.558L29.8169 40.37Z\",\n    fill: \"white\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgClose);\nexport default __webpack_public_path__ + \"static/media/close.eba335f9.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Link } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport SmoothImg from './smoothImgLoading'\r\nimport { ReactComponent as NotAllowed } from '../img/notAllowed.svg'\r\nimport { ReactComponent as Close } from '../img/close.svg'\r\nimport { removeAction } from '../actions/cart'\r\n\r\nconst PlaceOrderItem = ({\r\n  img,\r\n  productName,\r\n  qty,\r\n  price,\r\n  id,\r\n  isBuyNow,\r\n  soldOut,\r\n  removed,\r\n  setCartCount,\r\n  cartCount,\r\n}) => {\r\n  const cart = useSelector((state) => state.cart)\r\n\r\n  useEffect(() => {\r\n    if (removed || soldOut) {\r\n      const productInCart = cart.cartItems.find((e) => e._id === id)\r\n      if (productInCart) productInCart.removed2 = true\r\n    }\r\n  }, [removed, soldOut])\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  return (\r\n    <StyledItem>\r\n      {(soldOut || removed) && (\r\n        <div\r\n          onClick={() => {\r\n            dispatch(removeAction({ _id: id }))\r\n            setCartCount(Number(cartCount) - Number(qty))\r\n          }}\r\n          className='removeIt'\r\n        >\r\n          <Close />\r\n        </div>\r\n      )}\r\n      <div className='firstDiv'>\r\n        <Link\r\n          className='imgLink'\r\n          onClick={() => dispatch({ type: 'PRODUCT_DETAIL_REQUEST' })}\r\n          to={`/products/${id}${isBuyNow ? '?order=buyNow' : ''}`}\r\n        >\r\n          {(soldOut || removed) && (\r\n            <div className={`removed ${removed || soldOut ? '' : 'hide'}`}>\r\n              <p>{removed ? 'Removed' : soldOut ? 'SoldOut' : ''}</p>\r\n              <NotAllowed />\r\n            </div>\r\n          )}\r\n          <SmoothImg\r\n            key={id}\r\n            preLoaderId='preLoader'\r\n            loaderId='preloader2'\r\n            src={img}\r\n            alt='product'\r\n            tiny={`/api/products/${id}/tiny`}\r\n          />\r\n        </Link>\r\n        <h1>\r\n          <Link\r\n            onClick={() => dispatch({ type: 'PRODUCT_DETAIL_REQUEST' })}\r\n            to={`/products/${id}${isBuyNow ? '?order=buyNow' : ''}`}\r\n          >\r\n            {productName}\r\n          </Link>\r\n        </h1>\r\n      </div>\r\n      <div className='secondDiv'>\r\n        <p>\r\n          {qty} x {price}\r\n          <span className='currency1'>EGP</span> = {(qty * price).toFixed(2)}\r\n          <span className='currency2'>EGP</span>\r\n        </p>\r\n      </div>\r\n    </StyledItem>\r\n  )\r\n}\r\n\r\nconst StyledItem = styled.div`\r\n  .currency1,\r\n  .currency2 {\r\n    margin-left: 0.15rem;\r\n    font-size: calc(0.6rem + 0.3vw) !important;\r\n  }\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  width: 100%;\r\n  padding: 0.5rem 0;\r\n  border-bottom: 1px solid rgba(0, 0, 0, 12.5%);\r\n  width: 95%;\r\n  position: relative;\r\n  .removeIt {\r\n    display: flex;\r\n    position: absolute;\r\n    right: 0%;\r\n    top: 3%;\r\n    opacity: 0.7;\r\n    transition: 0.2s ease;\r\n    cursor: pointer;\r\n    &:hover {\r\n      opacity: 0.6;\r\n    }\r\n    svg {\r\n      width: 20px;\r\n      height: 20px;\r\n    }\r\n  }\r\n  &:last-child {\r\n    border-bottom: unset;\r\n  }\r\n  .imgLink {\r\n    min-width: 5vw;\r\n    height: calc(5vw * 0.796875);\r\n    position: relative;\r\n  }\r\n\r\n  .firstDiv a {\r\n    display: flex;\r\n  }\r\n  .firstDiv {\r\n    flex: 1 1 auto;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    img {\r\n      width: 5vw;\r\n      max-width: 100%;\r\n      object-fit: cover;\r\n      border-radius: 5px;\r\n      border: 0.5px solid rgba(0, 0, 0, 0.1);\r\n    }\r\n    h1 {\r\n      font-weight: 400 !important;\r\n      font-size: calc(0.9rem + 0.3vw) !important;\r\n      margin-left: 0.8rem !important;\r\n      padding-bottom: 0 !important;\r\n      padding-top: 0 !important;\r\n      a {\r\n        color: #1a1a1a;\r\n        &:hover {\r\n          text-decoration: underline;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .secondDiv {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    margin-left: calc(1.5rem + 1vw);\r\n    width: min-content;\r\n    p {\r\n      color: #343a40;\r\n      font-size: calc(0.75rem + 0.3vw) !important;\r\n      font-weight: 400 !important;\r\n      padding-bottom: 0 !important;\r\n      width: max-content;\r\n    }\r\n  }\r\n  .removed {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(255, 63, 63, 0.5);\r\n    z-index: 2;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    border-radius: 5px;\r\n    flex-direction: column;\r\n    transition: 0.3s ease;\r\n    &.hide {\r\n      opacity: 0;\r\n      pointer-events: none;\r\n    }\r\n    p {\r\n      color: white !important;\r\n      font-size: 0.72rem !important;\r\n      padding-bottom: 0rem !important;\r\n      font-weight: 500 !important;\r\n    }\r\n    svg {\r\n      width: 17px !important;\r\n      height: 17px !important;\r\n    }\r\n  }\r\n  @media screen and (max-width: 1050px) {\r\n    .imgLink {\r\n      min-width: calc(3vw + 3rem) !important;\r\n      height: calc((3vw + 3rem) * 0.796875) !important;\r\n    }\r\n    width: 100%;\r\n    .firstDiv {\r\n      flex: 1 1 67%;\r\n      img {\r\n        width: calc(3vw + 3rem) !important;\r\n        max-width: 100%;\r\n      }\r\n      h1 {\r\n        font-size: calc(0.53rem + 1vw) !important;\r\n      }\r\n    }\r\n    .secondDiv {\r\n      flex: 1 1 auto;\r\n      margin-left: calc(0.75rem + 1vw);\r\n      p {\r\n        white-space: normal;\r\n        width: unset;\r\n        font-size: calc(0.4rem + 1vw) !important;\r\n      }\r\n    }\r\n    .currency1,\r\n    .currency2 {\r\n      margin-left: 0.15rem;\r\n      font-size: calc(0.4rem + 0.3vw) !important;\r\n    }\r\n\r\n    .removed {\r\n      position: absolute;\r\n      left: 0;\r\n      top: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      background: rgba(255, 63, 63, 0.5);\r\n      z-index: 2;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      border-radius: 5px;\r\n      flex-direction: column;\r\n      transition: 0.3s ease;\r\n      &.hide {\r\n        opacity: 0;\r\n        pointer-events: none;\r\n      }\r\n      p {\r\n        color: white !important;\r\n        font-size: 0.6rem !important;\r\n        padding-bottom: 0rem !important;\r\n        font-weight: 500 !important;\r\n      }\r\n      svg {\r\n        width: 12px !important;\r\n        height: 12px !important;\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport default PlaceOrderItem\r\n","import axios from 'axios'\r\n\r\nconst createOrderAction = (setCartCount, isBuyNow) => async (\r\n  dispatch,\r\n  getState\r\n) => {\r\n  const userInfo = getState().userInfo\r\n  const cart = getState().cart\r\n  const { product } = getState().buyNowProduct\r\n\r\n  try {\r\n    dispatch({ type: 'CREATE_ORDER_REQUEST' })\r\n    const cancelToken = axios.CancelToken\r\n    const source = cancelToken.source()\r\n    const config = {\r\n      headers: {\r\n        Content_Type: 'application/json',\r\n        Authorization: `Bearer ${userInfo.token}`,\r\n      },\r\n      cancelToken: source.token,\r\n    }\r\n    const modifiedCart = () => {\r\n      if (isBuyNow === false) {\r\n        const modified = cart.cartItems.map((eachProduct) => {\r\n          return {\r\n            name: eachProduct.name,\r\n            qty: eachProduct.qty,\r\n            image: eachProduct.image,\r\n            price: eachProduct.price,\r\n            product: eachProduct._id,\r\n            removed: eachProduct.removed\r\n              ? eachProduct.removed\r\n              : eachProduct.removed2\r\n              ? eachProduct.removed2\r\n              : null,\r\n          }\r\n        })\r\n        const final = modified.filter((e) => {\r\n          if (!e.removed && !e.removed2) return e\r\n        })\r\n        return final\r\n      } else if (!product.removed) {\r\n        return [\r\n          {\r\n            name: product.name,\r\n            qty: product.qty,\r\n            image: product.image,\r\n            price: product.price,\r\n            product: product._id,\r\n          },\r\n        ]\r\n      } else {\r\n        return []\r\n      }\r\n    }\r\n    console.log('CART', modifiedCart())\r\n    const { data } = await axios.post(\r\n      '/api/orders',\r\n      {\r\n        user: userInfo.user._id,\r\n        orderItems: modifiedCart().filter((e) => e.qty !== 0),\r\n        shippingAddress: {\r\n          address: cart.address.address,\r\n          city: cart.address.city,\r\n          phoneNumber: cart.address.phoneNumber,\r\n          governorate: cart.address.governorate,\r\n          lat: cart.address.location.lat,\r\n          lon: cart.address.location.lon,\r\n        },\r\n        couponDiscount: cart.couponDiscount ? cart.couponDiscount : 0,\r\n        paymentMethod: cart.paymentMethod,\r\n        taxPrice: cart.taxes,\r\n        shippingPrice: cart.shipping,\r\n        totalPrice: cart.totalPrice,\r\n        itemsPrice: cart.itemsPrice,\r\n        code: cart.discount ? cart.discount.code.code : null,\r\n        voucherRemaining: cart.couponDiscount\r\n          ? Number(cart.couponDiscount) - cart.totalPrice > 0\r\n            ? Math.abs(\r\n                (Number(cart.totalPrice) - Number(cart.couponDiscount)).toFixed(\r\n                  2\r\n                )\r\n              )\r\n            : null\r\n          : null,\r\n      },\r\n      config\r\n    )\r\n    if (!isBuyNow) {\r\n      localStorage.removeItem('sickCartProducts')\r\n      setCartCount(0)\r\n    }\r\n\r\n    dispatch({ type: 'CREATE_ORDER_SUCCESS', payload: data })\r\n    if (!isBuyNow) {\r\n      cart.cartItems = []\r\n    }\r\n    cart.taxes = null\r\n    cart.totalPrice = null\r\n    cart.shipping = null\r\n  } catch (error) {\r\n    function isJson(str) {\r\n      try {\r\n        JSON.parse(str)\r\n      } catch (e) {\r\n        return false\r\n      }\r\n      return true\r\n    }\r\n    let passedError = null\r\n    if (\r\n      error.response.data.message &&\r\n      isJson(error.response.data.message) &&\r\n      JSON.parse(error.response.data.message).type === 'confirm'\r\n    ) {\r\n      passedError = JSON.parse(error.response.data.message)\r\n    }\r\n    dispatch({\r\n      type: 'CREATE_ORDER_FAIL',\r\n      payload: {\r\n        error: passedError\r\n          ? 'okTrue'\r\n          : error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n        confirm: passedError ? passedError.error : null,\r\n      },\r\n    })\r\n  }\r\n}\r\nexport default createOrderAction\r\n","import React, { useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useLocation, useHistory, Link } from 'react-router-dom'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport CheckoutSteps from '../components/CheckoutSteps'\r\nimport PlaceOrderItem from '../components/PlaceOrderItem'\r\nimport createOrderAction from '../actions/createOrder'\r\nimport Message from '../components/message'\r\nimport Loader from '../components/loader'\r\nimport { useState } from 'react'\r\n\r\nconst PlaceOrder = ({ setCartCount, cartCount }) => {\r\n  const dispatch = useDispatch()\r\n  const { product } = useSelector((state) => state.buyNowProduct)\r\n\r\n  function truncate(str) {\r\n    if (str) return str.length > 30 ? str.substr(0, 30 - 1) + '..' : str\r\n  }\r\n  const { address, cartItems, paymentMethod, discount } = useSelector(\r\n    (state) => state.cart\r\n  )\r\n  const { user } = useSelector((state) => state.userInfo)\r\n  const cart = useSelector((state) => state.cart)\r\n\r\n  const history = useHistory()\r\n  const location = useLocation()\r\n\r\n  const isBuyNow = location.search.split('=')[1] === 'buyNow'\r\n\r\n  useEffect(() => {\r\n    if (isBuyNow && !product.price) {\r\n      history.push('/')\r\n    }\r\n  }, [])\r\n  useEffect(() => {\r\n    const pushedLink = () => {\r\n      if (location.search.split('=')[1] === 'buyNow') {\r\n        return '/login?redirect=placeOrder?order=buyNow'\r\n      } else {\r\n        return '/login?redirect=placeOrder'\r\n      }\r\n    }\r\n    if (\r\n      location.pathname.split('/')[1].toLocaleLowerCase() === 'placeorder' &&\r\n      !user.name\r\n    ) {\r\n      history.push(pushedLink())\r\n    }\r\n  }, [history, location, user])\r\n\r\n  const [pricesArr, setPricesArr] = useState(\r\n    cartItems.map((each) => {\r\n      if (!each.removed2 && !each.removed) return each.price * each.qty\r\n    })\r\n  )\r\n  const [totalPrice, setTotalPrice] = useState(\r\n    isBuyNow && product.price\r\n      ? product.price.toFixed(2)\r\n      : pricesArr.length\r\n      ? pricesArr.reduce((acc, item) => acc + item).toFixed(2)\r\n      : 0\r\n  )\r\n\r\n  const toFixedFN = (num) => {\r\n    return Number(num).toFixed(2)\r\n  }\r\n\r\n  const discountValue = () => {\r\n    if (discount) {\r\n      return toFixedFN(\r\n        (discount.code.amount / 100) *\r\n          (Number(totalPrice) + (Number(totalPrice) * 14) / 100)\r\n      )\r\n    } else {\r\n      return 0\r\n    }\r\n  }\r\n\r\n  const [allFreeShipping] = useState(\r\n    Number(totalPrice) + (Number(totalPrice) * 14) / 100 > 2000\r\n      ? true\r\n      : cartItems.every((e) => e.freeShipping)\r\n  )\r\n  const [shippingValue] = useState(allFreeShipping ? 0 : 50)\r\n\r\n  const { order, orderLoading, orderPlaced, error, errorConfirm } = useSelector(\r\n    (state) => state.order\r\n  )\r\n\r\n  useEffect(() => {\r\n    const filtered = cartItems.filter((each) => {\r\n      if (!each.removed2 && !each.removed) {\r\n        return each.price * each.qty\r\n      }\r\n    })\r\n    setPricesArr(\r\n      filtered.map((each) => {\r\n        if (!each.removed2 && !each.removed) return each.price * each.qty\r\n      })\r\n    )\r\n    const pricesArr2 = filtered.map((each) => {\r\n      if (!each.removed2 && !each.removed) return each.price * each.qty\r\n    })\r\n\r\n    setTotalPrice(\r\n      isBuyNow && product.price\r\n        ? product.price.toFixed(2)\r\n        : pricesArr2.length\r\n        ? pricesArr2.reduce((acc, item) => acc + item).toFixed(2)\r\n        : 0\r\n    )\r\n    const totalPrice2 =\r\n      isBuyNow && product.price\r\n        ? product.price.toFixed(2)\r\n        : pricesArr2.length\r\n        ? pricesArr2.reduce((acc, item) => acc + item).toFixed(2)\r\n        : 0\r\n\r\n    cart.taxes = Number(toFixedFN((Number(totalPrice2) * 14) / 100))\r\n    cart.totalPrice2 = Number(totalPrice2)\r\n    cart.shipping = Number(toFixedFN(shippingValue))\r\n    cart.itemsPrice = Number(totalPrice2)\r\n    cart.totalPrice2 = Math.abs(\r\n      toFixedFN(\r\n        Number(totalPrice2) +\r\n          shippingValue +\r\n          (Number(totalPrice2) * 14) / 100 -\r\n          discountValue()\r\n      )\r\n    )\r\n    cart.couponDiscount = discount ? discountValue() : 0\r\n  }, [errorConfirm])\r\n\r\n  const placeOrderHandler = () => {\r\n    dispatch(createOrderAction(setCartCount, isBuyNow))\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (orderPlaced) {\r\n      localStorage.removeItem('sickDiscount')\r\n      history.push(`/orders/${order._id}`)\r\n    }\r\n  }, [orderPlaced, history])\r\n\r\n  useEffect(() => {\r\n    if (\r\n      !cart.paymentMethod ||\r\n      !address.display_address ||\r\n      (!cart.cartItems.length && orderPlaced === false)\r\n    ) {\r\n      history.push('/cart')\r\n    }\r\n  }, [cartItems, address.display_address])\r\n\r\n  return (\r\n    <StyledPlaceOrder>\r\n      <CheckoutSteps step1 step2 step3 step4 current='step4' />\r\n      <div className='content'>\r\n        <div className='summary'>\r\n          <Message\r\n            vibrating={\r\n              error ? (error.includes('okTrue') ? false : `true`) : 'true'\r\n            }\r\n            visiblity={error ? true : false}\r\n            msg={\r\n              error\r\n                ? error.includes('timed out')\r\n                  ? 'Network Error'\r\n                  : error.includes('okTrue') && product\r\n                  ? `returnGoBack`\r\n                  : error.includes('okTrue')\r\n                  ? `Some Products have just Sold Out or Removed, Continue if you don't mind.`\r\n                  : error.includes('mongo')\r\n                  ? 'Server Error'\r\n                  : error.includes(\"Email isn't verified\")\r\n                  ? 'returnTheThing'\r\n                  : error\r\n                : 'Ok'\r\n            }\r\n            hidden={error ? false : true}\r\n            type={error ? (error.includes('okTrue') ? `ok` : `error`) : 'error'}\r\n          />\r\n          <div className='shipping-section section'>\r\n            <h1>Shipping :</h1>\r\n            <p>Address: {address.display_address}</p>\r\n          </div>\r\n          <div className='payment-section section'>\r\n            <h1>Payment Method :</h1>\r\n            <p>Method: {paymentMethod}</p>\r\n          </div>\r\n          <div className='order-section section'>\r\n            <h1>\r\n              {isBuyNow || cartItems.length === 1\r\n                ? 'Order Item :'\r\n                : 'Order Items :'}\r\n            </h1>\r\n            {!isBuyNow ? (\r\n              cartItems.map((each) => {\r\n                if (!each.removed) {\r\n                  return (\r\n                    <PlaceOrderItem\r\n                      cartCount={cartCount}\r\n                      setCartCount={setCartCount}\r\n                      price={each.price}\r\n                      qty={each.qty}\r\n                      productName={truncate(each.name)}\r\n                      img={each.image}\r\n                      id={each._id}\r\n                      soldOut={\r\n                        errorConfirm\r\n                          ? errorConfirm.find(\r\n                              (e) => e.id === each._id && e.error === 'soldOut'\r\n                            )\r\n                          : false\r\n                      }\r\n                      removed={\r\n                        errorConfirm\r\n                          ? errorConfirm.find(\r\n                              (e) => e.id === each._id && e.error === 'removed'\r\n                            )\r\n                          : false\r\n                      }\r\n                    />\r\n                  )\r\n                }\r\n              })\r\n            ) : (\r\n              <PlaceOrderItem\r\n                cartCount={cartCount}\r\n                setCartCount={setCartCount}\r\n                price={product.price}\r\n                qty={product.qty}\r\n                productName={truncate(product.name)}\r\n                img={product.image}\r\n                id={product._id}\r\n                isBuyNow={isBuyNow}\r\n                soldOut={\r\n                  errorConfirm\r\n                    ? errorConfirm.find(\r\n                        (e) => e.id === product._id && e.error === 'soldOut'\r\n                      )\r\n                    : false\r\n                }\r\n                removed={\r\n                  errorConfirm\r\n                    ? errorConfirm.find(\r\n                        (e) => e.id === product._id && e.error === 'removed'\r\n                      )\r\n                    : false\r\n                }\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className='table'>\r\n          <h1 className='title'>Order Summary</h1>\r\n          <div className='row1 row'>\r\n            <h1>Items :</h1>\r\n            <p>\r\n              {totalPrice}\r\n              <span className='currency'>EGP</span>\r\n            </p>\r\n          </div>\r\n          <div className='row2 row'>\r\n            <h1>Shipping :</h1>\r\n            <p>\r\n              {!allFreeShipping ? toFixedFN(50) : 'FREE'}\r\n              {!allFreeShipping && <span className='currency'>EGP</span>}\r\n            </p>\r\n          </div>\r\n          <div className='row3 row'>\r\n            <h1>Tax :</h1>\r\n            <p>\r\n              {toFixedFN((Number(totalPrice) * 14) / 100)}\r\n              <span className='currency'>EGP</span>\r\n            </p>\r\n          </div>\r\n          {discount && (\r\n            <div className='row5 row'>\r\n              <h1>Discount :</h1>\r\n              <p>\r\n                -{toFixedFN(discountValue())}\r\n                <span className='currency'>EGP</span>\r\n              </p>\r\n            </div>\r\n          )}\r\n          <div className='row4 row'>\r\n            <h1>Total :</h1>\r\n            <p className={`${discount ? 'discount' : ''}`}>\r\n              {discount && (\r\n                <h1 className='lastPrice'>\r\n                  {toFixedFN(\r\n                    Number(totalPrice) +\r\n                      shippingValue +\r\n                      (Number(totalPrice) * 14) / 100\r\n                  )}\r\n                </h1>\r\n              )}\r\n              {toFixedFN(\r\n                Number(totalPrice) +\r\n                  shippingValue +\r\n                  (Number(totalPrice) * 14) / 100\r\n              ) === discountValue()\r\n                ? 'Free'\r\n                : toFixedFN(\r\n                    Number(totalPrice) +\r\n                      shippingValue +\r\n                      (Number(totalPrice) * 14) / 100 +\r\n                      -discountValue()\r\n                  ) > 0\r\n                ? toFixedFN(\r\n                    Number(totalPrice) +\r\n                      shippingValue +\r\n                      (Number(totalPrice) * 14) / 100 +\r\n                      -discountValue()\r\n                  )\r\n                : Math.abs(\r\n                    toFixedFN(\r\n                      Number(totalPrice) +\r\n                        shippingValue +\r\n                        (Number(totalPrice) * 14) / 100 +\r\n                        -discountValue()\r\n                    )\r\n                  )}\r\n              <span\r\n                className={`currency ${\r\n                  toFixedFN(\r\n                    Number(totalPrice) +\r\n                      shippingValue +\r\n                      (Number(totalPrice) * 14) / 100\r\n                  ) === discountValue()\r\n                    ? 'free'\r\n                    : ''\r\n                }`}\r\n              >\r\n                EGP\r\n              </span>\r\n            </p>\r\n          </div>\r\n\r\n          <button onClick={placeOrderHandler}>\r\n            Place Order {orderLoading && <Loader />}\r\n          </button>\r\n        </div>\r\n        <div className='lineSeperate'></div>\r\n      </div>\r\n    </StyledPlaceOrder>\r\n  )\r\n}\r\nconst StyledPlaceOrder = styled.div`\r\n  .lineSeperate {\r\n    display: none;\r\n  }\r\n\r\n  .shipping-section p,\r\n  .payment-section p {\r\n    width: 90%;\r\n  }\r\n  button {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    padding: 0.55rem 0.5rem;\r\n    border: none;\r\n    background: #00b2d8;\r\n    color: white;\r\n    border-radius: 6px;\r\n    font-size: calc(1.2rem + 0.3vw);\r\n    cursor: pointer;\r\n    transition: 0.1s;\r\n    margin: 0 calc(1.1rem + 0.3vw);\r\n    margin-bottom: calc(0.8rem + 0.3vw);\r\n    &:hover {\r\n      background: #00a8ce;\r\n    }\r\n    #loader:first-child {\r\n      width: calc(0.9rem + 0.5vw);\r\n      height: calc(0.9rem + 0.5vw);\r\n      margin-left: 0.45rem;\r\n      #greybackground path {\r\n        stroke: white;\r\n      }\r\n    }\r\n  }\r\n  .currency {\r\n    margin-left: 0.15rem;\r\n    font-size: calc(0.6rem + 0.3vw) !important;\r\n    &.free {\r\n      display: none;\r\n    }\r\n  }\r\n  .table {\r\n    box-shadow: -2px 2px 8px rgba(0, 0, 0, 0.1);\r\n    border-radius: 10px;\r\n    margin-top: 1rem;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n    border: 1px solid rgba(0, 0, 0, 7.5%);\r\n    flex: 1 1 auto;\r\n    h1 {\r\n      font-size: calc(1rem + 0.3vw);\r\n      font-weight: 400;\r\n      padding: 0 calc(1.1rem + 0.3vw);\r\n    }\r\n    p {\r\n      font-size: calc(1rem + 0.3vw);\r\n      margin-left: calc(2.4rem + 1vw);\r\n    }\r\n    .title {\r\n      font-size: calc(1.48rem + 0.3vw);\r\n      font-weight: 500;\r\n      padding-top: calc(0.8rem + 0.3vw);\r\n      padding-bottom: calc(0.5rem + 0.3vw);\r\n      color: #1a1a1a;\r\n      margin-right: calc(1.7rem + 0.6vw);\r\n      white-space: nowrap;\r\n    }\r\n\r\n    .row {\r\n      padding: 0.5rem 0;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      border-top: 1px solid rgba(0, 0, 0, 7.5%);\r\n      margin: 0 calc(1.1rem + 0.3vw);\r\n      h1 {\r\n        padding: unset !important;\r\n        color: #1a1a1a;\r\n        font-size: calc(0.83rem + 0.3vw);\r\n        white-space: nowrap;\r\n      }\r\n      p {\r\n        color: #1a1a1a;\r\n        font-size: calc(0.83rem + 0.3vw);\r\n      }\r\n      span {\r\n        color: #1a1a1a;\r\n      }\r\n    }\r\n    .row1 {\r\n      border-top: unset;\r\n      padding-top: 0;\r\n    }\r\n    .row4 {\r\n      margin-bottom: calc(0.5rem + 0.3vw);\r\n      h1 {\r\n        color: #1a1a1a;\r\n      }\r\n      p {\r\n        color: #1a1a1a;\r\n        margin-left: calc(1.5rem + 1vw);\r\n        display: flex;\r\n        align-items: center;\r\n      }\r\n      p.discount {\r\n        font-weight: 500;\r\n      }\r\n      span {\r\n        color: #1a1a1a;\r\n      }\r\n      .lastPrice {\r\n        margin-right: 0.4rem;\r\n        text-decoration: line-through;\r\n        font-size: calc(0.71rem + 0.3vw);\r\n        font-weight: 400 !important;\r\n      }\r\n    }\r\n  }\r\n  .section {\r\n    h1 {\r\n      padding-bottom: 0.8rem;\r\n      padding-top: 0.8rem;\r\n      font-weight: 500;\r\n      color: #1a1a1a;\r\n      font-size: calc(1.8rem + 0.3vw);\r\n    }\r\n    &:first-child h1 {\r\n      padding-top: unset;\r\n    }\r\n    p {\r\n      color: #1a1a1a;\r\n      padding-bottom: 0.8rem;\r\n      font-size: calc(0.8rem + 0.3vw);\r\n    }\r\n    border-bottom: 1px solid rgba(0, 0, 0, 12.5%);\r\n    &:last-child {\r\n      border-bottom: unset;\r\n    }\r\n  }\r\n  .content {\r\n    width: 85%;\r\n    margin: 0 auto;\r\n    margin-top: 1.8rem;\r\n    margin-bottom: 1rem;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: flex-start;\r\n    gap: calc(1.5rem + 0.3vw);\r\n    .summary {\r\n      flex: 1 1 75%;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 1050px) {\r\n    .lineSeperate {\r\n      display: block;\r\n      border-radius: 1px;\r\n      width: 45%;\r\n      height: 2px;\r\n      background: rgba(0, 176, 216, 62%);\r\n      margin: calc(1.3rem + 0.5vh) auto;\r\n      margin-top: calc(1.45rem + 0.5vh);\r\n    }\r\n    .currency {\r\n      margin-left: 0.1rem;\r\n      font-size: calc(0.55rem + 0.3vw) !important;\r\n    }\r\n    .content {\r\n      flex-direction: column;\r\n      width: 90%;\r\n      gap: unset !important;\r\n    }\r\n    .summary {\r\n      order: 2;\r\n      width: 100%;\r\n    }\r\n\r\n    .table {\r\n      width: 100%;\r\n      margin-top: 0;\r\n      border: unset;\r\n      box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.12);\r\n      .title {\r\n        font-size: calc(1.55rem + 0.3vw);\r\n        padding-bottom: calc(0.8rem + 0.3vw - 0.5rem);\r\n        padding-top: calc(1rem + 0.3vw);\r\n        margin-right: unset;\r\n      }\r\n      .row1 {\r\n        border-top: unset !important;\r\n      }\r\n      .row4 {\r\n        margin-bottom: calc(0.8rem + 0.3vw - 0.5rem) !important;\r\n      }\r\n      .row {\r\n        border-top: 1px solid rgba(0, 0, 0, 5%);\r\n        padding: 0.5rem 0;\r\n        margin: 0 calc(1.1rem + 0.3vw);\r\n      }\r\n      .row h1,\r\n      .row p {\r\n        font-size: calc(0.9rem + 0.3vw);\r\n      }\r\n      button {\r\n        font-size: calc(1.1rem + 0.3vw);\r\n      }\r\n      .row {\r\n        padding: 0.5rem 0;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        border-top: 1px solid rgba(0, 0, 0, 7.5%);\r\n        margin: 0 calc(1.1rem + 0.3vw);\r\n        h1 {\r\n          padding: unset !important;\r\n          color: #1a1a1a;\r\n          font-size: calc(0.83rem + 0.3vw);\r\n        }\r\n        p {\r\n          color: #1a1a1a;\r\n          font-size: calc(0.83rem + 0.3vw);\r\n        }\r\n        span {\r\n          color: #1a1a1a;\r\n        }\r\n      }\r\n    }\r\n    .section {\r\n      h1 {\r\n        padding-bottom: 0.4rem;\r\n        padding-top: 0.8rem;\r\n        font-weight: 500;\r\n        color: #1a1a1a;\r\n        font-size: calc(1.55rem + 0.3vw);\r\n      }\r\n      &:first-child h1 {\r\n        padding-top: unset;\r\n      }\r\n      p {\r\n        padding-bottom: 0.8rem;\r\n        color: #1a1a1a;\r\n        font-size: calc(0.52rem + 1vw) !important;\r\n      }\r\n      border-bottom: 1px solid rgba(0, 0, 0, 12.5%);\r\n      &:last-child {\r\n        border-bottom: unset;\r\n      }\r\n    }\r\n    .removed {\r\n      position: absolute;\r\n      left: 0;\r\n      top: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      background: rgba(255, 63, 63, 0.5);\r\n      z-index: 2;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      border-radius: 5px;\r\n      flex-direction: column;\r\n      transition: 0.3s ease;\r\n      &.hide {\r\n        opacity: 0;\r\n        pointer-events: none;\r\n      }\r\n      p {\r\n        color: white !important;\r\n        font-size: 0.65rem !important;\r\n        padding-bottom: 0rem !important;\r\n        font-weight: 500 !important;\r\n      }\r\n      img {\r\n        width: 14px !important;\r\n        height: 14px !important;\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport default PlaceOrder\r\n"],"sourceRoot":""}